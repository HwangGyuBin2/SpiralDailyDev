version: 2.1

orbs:
  flutter: circleci/flutter@2.0.2
  asdf: circleci/asdf@1.1.1

jobs:
  ci:
    macos:
      xcode: 12.5.1
    steps:
      - checkout
      - asdf/install
      - asdf/plugin-add:
          name: flutter
          git: https://github.com/patoconnor43/asdf-flutter.git
          rev: master
      - asdf/flutter: 3.3.10
      - run: asdf local flutter 3.3.10
      - run: asdf flutter pub global activate melos 2.9.0
      - run: asdf flutter pub global run melos run bs
      - run: asdf flutter pub global run melos run daily_memo_pub_get
#      - run: export PATH="$PATH:/path/to/flutter/bin"
#      - run: export PATH="$PATH":"$HOME/.pub-cache/bin"
#      - run: echo which flutter
#      - run: flutter clean
#      - run: flutter pub upgrade
#      - run: flutter pub get
#


workflows:
  version: 2
  main:
    jobs:
      - ci
